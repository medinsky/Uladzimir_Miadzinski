<div class="container text-center pt-4">
  <div class="col-lg-4 offset-lg-4 pt-4">
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <ng-template #loading>
        <app-loading></app-loading>
      </ng-template>
      <div class="form-group">
        <mat-form-field class="full-width">
          <input matInput formControlName="name" placeholder="Username" autofocus autocomplete="username">
        </mat-form-field>
        <p class="text-danger"
           *ngIf="name.errors !== null && name.errors.required && (name.dirty || name.touched);">
          Username is required.
        </p>
        <div *ngIf="!name.pending; else loading;">
          <p class="text-danger"
             *ngIf="name.errors !== null; else loginFound;">
            {{name.errors.message}}
          </p>
          <ng-template #loginFound>
            <p class="text-success">
              Username correct!
            </p>
          </ng-template>
        </div>
      </div>
      <div class="form-group">
        <mat-form-field class="full-width">
          <input matInput formControlName="password" type="password" class="form-control" placeholder="Password" autocomplete="current-password">
        </mat-form-field>
        <p class="text-danger"
           *ngIf="password.errors !== null && password.errors.required && (password.dirty || password.touched);">
          Password is required.
        </p>
      </div>

      <div class="button-row">
        <button mat-flat-button [disabled]="!loginForm.valid" color="primary">Login</button>
        <button mat-flat-button  routerLink="/forgot-password" type="button" color="accent">Forgot password?</button>
      </div>
    </form>
  </div>
</div>
