<ng-template #loading>
  <app-loading></app-loading>
</ng-template>

<div class="container text-center pt-4">
  <div class="col-lg-6 offset-lg-3 mt-3">
    <form [formGroup]="reassignForm" (ngSubmit)="onSubmit()" novalidate>
      <mat-card>

        <mat-card-header>
          <mat-card-title>{{ 'forgotPassword.title' | translate }}</mat-card-title>
          <mat-card-subtitle>{{ 'forgotPassword.subtitle' | translate }}</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <div class="form-group">
            <mat-form-field class="full-width">
              <input matInput formControlName="name" placeholder="{{ 'login.form.username' | translate }}" autofocus autocomplete="username">
            </mat-form-field>
            <p class="text-danger"
               *ngIf="name.errors !== null && name.errors.required && (name.dirty || name.touched);">
              {{ 'login.form.username' | translate }} {{ 'validators.required' | translate }}.
            </p>
            <div *ngIf="!name.pending; else loading;">
              <p class="text-danger"
                 *ngIf="name.errors !== null; else loginFound;">
                {{ name.errors.message | translate }}
              </p>
              <ng-template #loginFound>
                <p class="text-success">
                  {{ 'login.form.username' | translate }} {{ 'validators.found' | translate }}!
                </p>
              </ng-template>
            </div>
          </div>
          <div class="form-group">
            <mat-form-field class="full-width">
              <input matInput formControlName="password" type="password" placeholder="{{ 'forgotPassword.form.newPassword' | translate }}" autocomplete="current-password">
            </mat-form-field>
            <p class="text-danger"
               *ngIf="password.errors !== null && password.errors.required && (password.dirty || password.touched);">
              {{ 'forgotPassword.form.newPassword' | translate }} {{ 'validators.required' | translate }}.
            </p>
          </div>
        </mat-card-content>

        <mat-card-actions class="mb-2 button-row">
          <button mat-flat-button [disabled]="!reassignForm.valid" color="primary">{{ 'forgotPassword.form.actions.assign' | translate }}</button>
          <button mat-flat-button type="button" routerLink="/login" color="">{{ 'forgotPassword.form.actions.backToLogin' | translate }}</button>
        </mat-card-actions>

      </mat-card>
    </form>
  </div>
</div>

